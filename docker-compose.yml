services:
  dyndns:
    # Use pre-built image from GitHub Container Registry
    image: ghcr.io/stefanodecillis/cloudflare-dyndns-worker:latest
    # Or build locally:
    # build: .
    container_name: cloudflare-dyndns
    restart: unless-stopped

    # Option 1: Use .env file (recommended for complex configs)
    env_file:
      - .env

    # Option 2: Inline environment variables
    # NOTE: Wrap JSON in single quotes to avoid YAML parsing issues
    # environment:
    #   CLOUDFLARE_API_TOKEN: your_api_token_here
    #   CLOUDFLARE_RECORDS: '[{"zone":"example.com","subdomain":"www","proxy":false},{"zone":"example.com","subdomain":"api","proxy":false}]'
    #   IP_CHECK_INTERVAL: "60"
    #   SYNC_INTERVAL: "300"

    # Resource limits (recommended for NAS)
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 128M
        reservations:
          cpus: '0.1'
          memory: 32M

    # Logging options
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
