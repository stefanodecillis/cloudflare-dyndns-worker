# Cloudflare DynDNS Worker - Environment Variables Configuration

# ============================================================================
# Simple Array Format (RECOMMENDED)
# ============================================================================

# REQUIRED: Cloudflare API Token
# Create at: https://dash.cloudflare.com/profile/api-tokens
# Permissions needed: Zone - DNS - Edit, Zone - Zone - Read
CLOUDFLARE_API_TOKEN=your_api_token_here

# REQUIRED: Array of DNS records to manage
# Format: [{"zone":"domain.com","subdomain":"subdomain","proxy":false}]
# NO ZONE IDs NEEDED - automatically resolved via Cloudflare API!

# Single root domain:
# CLOUDFLARE_RECORDS=[{"zone":"stefanodecillis.com","subdomain":"","proxy":false}]

# Single subdomain:
# CLOUDFLARE_RECORDS=[{"zone":"stefanodecillis.com","subdomain":"ha-trani","proxy":false}]

# Multiple subdomains on same domain:
CLOUDFLARE_RECORDS=[{"zone":"stefanodecillis.com","subdomain":"ha-trani","proxy":false},{"zone":"stefanodecillis.com","subdomain":"immich","proxy":false}]

# Multiple domains:
# CLOUDFLARE_RECORDS=[{"zone":"stefanodecillis.com","subdomain":"ha-trani","proxy":false},{"zone":"another.com","subdomain":"api","proxy":true}]

# With IPv6 (AAAA records):
# CLOUDFLARE_RECORDS=[{"zone":"example.com","subdomain":"ipv6","proxy":false,"type":"AAAA"}]

# Mixed IPv4 and IPv6:
# CLOUDFLARE_RECORDS=[{"zone":"example.com","subdomain":"www","proxy":false,"type":"A"},{"zone":"example.com","subdomain":"ipv6","proxy":false,"type":"AAAA"}]

# ============================================================================
# Optional Configuration
# ============================================================================

# How often to check for IP changes (in seconds, default: 60)
IP_CHECK_INTERVAL=60

# How often to verify DNS settings (in seconds, default: 300)
SYNC_INTERVAL=300

# ============================================================================
# Alternative: Legacy Authentication (not recommended)
# ============================================================================

# CLOUDFLARE_EMAIL=your_email@example.com
# CLOUDFLARE_API_KEY=your_api_key_here

# ============================================================================
# Field Reference
# ============================================================================

# zone (required):
#   - Your domain name as shown in Cloudflare Dashboard
#   - Example: "stefanodecillis.com", "example.com"
#   - Must match exactly (case-sensitive)

# subdomain (optional):
#   - Subdomain part only (not the full domain)
#   - Example: "ha-trani", "www", "api"
#   - Use empty string "" for root domain (@)
#   - Default: "" (root domain)

# proxy (optional):
#   - true: Traffic proxied through Cloudflare CDN (orange cloud)
#   - false: DNS only (gray cloud)
#   - Default: false

# type (optional):
#   - "A": IPv4 address (default)
#   - "AAAA": IPv6 address
#   - Default: "A"

# ============================================================================
# Notes
# ============================================================================

# 1. NO ZONE IDs NEEDED! The worker will find your zone automatically
# 2. Zone names must match exactly what's shown in Cloudflare Dashboard
# 3. Subdomain is the prefix only (e.g., "www" not "www.example.com")
# 4. Type defaults to "A" (IPv4) if not specified
# 5. Proxy defaults to false (DNS only) if not specified
# 6. Minimum interval is 10 seconds

# Create API Token:
# 1. Go to https://dash.cloudflare.com/profile/api-tokens
# 2. Click "Create Token"
# 3. Use template "Edit Zone DNS" or create custom with:
#    - Zone - DNS - Edit (required for updating records)
#    - Zone - Zone - Read (required for finding your zones)
#    - Include: All zones (or specific zones if you prefer)

# Zone Auto-Detection:
# - The worker will query your Cloudflare account and find zones by domain name
# - Make sure your API token has permission to list zones (Zone - Zone - Read)
# - Zone IDs are resolved once at startup, then cached for the session
